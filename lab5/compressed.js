var all,daily_play,found,guess,points,rank1,rank2,rank3,rank4,rank5,rank6,rank7,rank8,rank9,replaying,total,todaytotal,yesterdaytotal,win,words,todaywords,yesterdaywords,dark,foundlist=[],letters=[],todayletters=[],wordlist=[],todaywordlist=[],yesterdaywordlist=[],comb1=document.getElementById("comb1"),comb2=document.getElementById("comb2"),comb3=document.getElementById("comb3"),comb4=document.getElementById("comb4"),comb5=document.getElementById("comb5"),comb6=document.getElementById("comb6"),comb7=document.getElementById("comb7"),play1=document.getElementById("play1"),play2=document.getElementById("play2"),play3=document.getElementById("play3"),play4=document.getElementById("play4"),play5=document.getElementById("play5"),play6=document.getElementById("play6"),play7=document.getElementById("play7");function darkmode(){if(1==dark){for(var e=document.querySelectorAll("*"),t=0;t<e.length;t++)"fg"!=e[t].className&&"bg"!=e[t].className&&(e[t].style.background="#fbfcff");dark=0,localStorage.setItem("useDarkMode",1)}else{for(e=document.querySelectorAll("*"),t=0;t<e.length;t++)"fg"!=e[t].className&&"bg"!=e[t].className&&(e[t].style.background="#111111");dark=1,localStorage.setItem("useDarkMode",0)}}function type(e,t){document.getElementById("no-message").style.display="inline",document.getElementById("pangram").style.display="none",document.getElementById("already-found").style.display="none",document.getElementById("center-letter").style.display="none",document.getElementById("too-short").style.display="none",document.getElementById("not-in-list").style.display="none",document.getElementById("comb"+t).style.height="80px",document.getElementById("comb"+t).style.width="80px",document.getElementById("comb"+t).style.left=parseInt(document.getElementById("comb"+t).style.left)+10+"px",document.getElementById("comb"+t).style.top=parseInt(document.getElementById("comb"+t).style.top)+10+"px",document.getElementById("guess").value=document.getElementById("guess").value+e}function untype(){comb1.style.height="100px",comb1.style.width="100px",comb1.style.left="1px",comb1.style.top="51px",comb2.style.height="100px",comb2.style.width="100px",comb2.style.left="80px",comb2.style.top="1px",comb3.style.height="100px",comb3.style.width="100px",comb3.style.left="159px",comb3.style.top="51px",comb4.style.height="100px",comb4.style.width="100px",comb4.style.left="1px",comb4.style.top="149px",comb5.style.height="100px",comb5.style.width="100px",comb5.style.left="80px",comb5.style.top="199px",comb6.style.height="100px",comb6.style.width="100px",comb6.style.left="159px",comb6.style.top="149px",comb7.style.height="100px",comb7.style.width="100px",comb7.style.left="80px",comb7.style.top="100px"}function display(){var e=0;play1.src=letters[0]+".png",play1.style.left="21px",play1.style.top="51px",play1.ontouchstart=function(){e=1,type(letters[0],1)},play1.onmousedown=function(){1!=e&&type(letters[0],1)},play1.style.display="block",play1.onmouseup=function(){untype()},play1.ondragend=function(){untype()},play1.ontouchend=function(){untype()},play1.ontouchcancel=function(){untype()},play2.src=letters[1]+".png",play2.style.left="100px",play2.style.top="1px",play2.ontouchstart=function(){type(letters[e=1],2)},play2.onmousedown=function(){1!=e&&type(letters[1],2)},play2.style.display="block",play2.onmouseup=function(){untype()},play2.ondragend=function(){untype()},play2.ontouchend=function(){untype()},play2.ontouchcancel=function(){untype()},play3.src=letters[2]+".png",play3.style.left="179px",play3.style.top="51px",play3.ontouchstart=function(){e=1,type(letters[2],3)},play3.onmousedown=function(){1!=e&&type(letters[2],3)},play3.style.display="block",play3.onmouseup=function(){untype()},play3.ondragend=function(){untype()},play3.ontouchend=function(){untype()},play3.ontouchcancel=function(){untype()},play4.src=letters[3]+".png",play4.style.left="21px",play4.style.top="149px",play4.ontouchstart=function(){e=1,type(letters[3],4)},play4.onmousedown=function(){1!=e&&type(letters[3],4)},play4.style.display="block",play4.onmouseup=function(){untype()},play4.ondragend=function(){untype()},play4.ontouchend=function(){untype()},play4.ontouchcancel=function(){untype()},play5.src=letters[4]+".png",play5.style.left="100px",play5.style.top="199px",play5.ontouchstart=function(){e=1,type(letters[4],5)},play5.onmousedown=function(){1!=e&&type(letters[4],5)},play5.style.display="block",play5.onmouseup=function(){untype()},play5.ondragend=function(){untype()},play5.ontouchend=function(){untype()},play5.ontouchcancel=function(){untype()},play6.src=letters[5]+".png",play6.style.left="179px",play6.style.top="149px",play6.ontouchstart=function(){e=1,type(letters[5],6)},play6.onmousedown=function(){1!=e&&type(letters[5],6)},play6.style.display="block",play6.onmouseup=function(){untype()},play6.ondragend=function(){untype()},play6.ontouchend=function(){untype()},play6.ontouchcancel=function(){untype()},play7.src=letters[6]+".png",play7.style.left="100px",play7.style.top="100px",play7.ontouchstart=function(){e=1,type(letters[6][1],7)},play7.onmousedown=function(){1!=e&&type(letters[6][1],7)},play7.style.display="block",play7.onmouseup=function(){untype()},play7.ondragend=function(){untype()},play7.ontouchend=function(){untype()},play7.ontouchcancel=function(){untype()}}function update_rank(){var e=rank9<=points?(0==win&&(alert("You earned the rank of Queen Bee!\n\nCan you find all the words?"),win=1),"Queen Bee!"):rank8<=points?"Outstanding":rank7<=points?"Marvellous":rank6<=points?"Superb":rank5<=points?"Excellent":rank4<=points?"Skilled":rank3<=points?"Fine":rank2<=points?"Novice":"Newbie";document.getElementById("rank-update").innerHTML=e}function set_rank(){rank1=0,rank2=Math.floor(.02*total),rank3=Math.floor(.05*total),rank4=Math.floor(.08*total),rank5=Math.floor(.15*total),rank6=Math.floor(.25*total),rank7=Math.floor(.4*total),rank8=Math.floor(.5*total),rank9=Math.floor(.7*total)}function save_word(){localStorage.setItem("foundwords",JSON.stringify(foundlist))}function add_points(){var e=0,t=0,n=0,o=0,l=0,s=0,y=0,d=0;if(1===daily_play&&save_word(),(y=guess.length)<7)return 4==y&&(y=1),void(points+=y);for(y=0;y<guess.length;){for(d=0;d<7;d++)guess[y]==letters[d]&&(0==d&&(e=1),1==d&&(t=1),2==d&&(n=1),3==d&&(o=1),4==d&&(l=1),5==d&&(s=1));y+=1}if(1==e&&1==t&&1==n&&1==o&&1==l&&1==s)return points=points+guess.length+7,document.getElementById("no-message").style.display="none",void(document.getElementById("pangram").style.display="inline");points+=guess.length}function found_word(){for(var e=0;e<found;e++)if(guess==foundlist[e])return document.getElementById("no-message").style.display="none",document.getElementById("already-found").style.display="inline",1;return foundlist.push(guess),found+=1,add_points(),document.getElementById("points-update").innerHTML=points,document.getElementById("answers-update").innerHTML=foundlist.join("<br />"),update_rank(),found==words&&(alert("Congratulations! You found all the words!"),all=1),0}function check(){var e,t=0;for(document.getElementById("no-message").style.display="inline",document.getElementById("pangram").style.display="none",document.getElementById("already-found").style.display="none",document.getElementById("center-letter").style.display="none",document.getElementById("too-short").style.display="none",document.getElementById("not-in-list").style.display="none",0===replaying?(guess=document.getElementById("guess").value.toLowerCase(),document.getElementById("player-guess").reset()):guess=guess.toLowerCase(),e=0;e<guess.length;e++)"7"+guess[e]==letters[6]&&(t=1);if(guess.length<4)return document.getElementById("no-message").style.display="none",document.getElementById("too-short").style.display="inline",1;if(0==t)return document.getElementById("no-message").style.display="none",document.getElementById("center-letter").style.display="inline",1;for(e=0;e<words;e++)if(guess==wordlist[e])return e=found_word();return document.getElementById("no-message").style.display="none",document.getElementById("not-in-list").style.display="inline",1}function replay_words(){var e,t;for(replaying=1,t=JSON.parse(localStorage.getItem("foundwords")),localStorage.removeItem("foundwords"),e=0;e<t.length;e++)if(guess=t[e],1==check()){for(localStorage.removeItem("foundwords"),e=0;e<found;e++)foundlist.pop();return rank="Newbie",win=points=found=all=0,document.getElementById("no-message").style.display="inline",document.getElementById("pangram").style.display="none",document.getElementById("already-found").style.display="none",document.getElementById("center-letter").style.display="none",document.getElementById("too-short").style.display="none",document.getElementById("not-in-list").style.display="none",void(replaying=0)}document.getElementById("no-message").style.display="inline",document.getElementById("pangram").style.display="none",document.getElementById("already-found").style.display="none",document.getElementById("center-letter").style.display="none",document.getElementById("too-short").style.display="none",document.getElementById("not-in-list").style.display="none",replaying=0}function daily(){var e;for(daily_play=1,e=0;e<found;e++)foundlist.pop();rank="Newbie",win=replaying=points=found=all=0,document.getElementById("points-update").innerHTML=points,document.getElementById("answers-update").innerHTML=foundlist.join("<br />"),document.getElementById("rank-update").innerHTML=rank,document.getElementById("yesterday-or-random").innerHTML="Yesterday's answers",document.getElementById("random-answers").style.display="none",document.getElementById("restart-daily-button").style.visibility="hidden",document.getElementById("update-random").innerHTML="",document.getElementById("no-message").style.display="inline",document.getElementById("pangram").style.display="none",document.getElementById("already-found").style.display="none",document.getElementById("center-letter").style.display="none",document.getElementById("too-short").style.display="none",document.getElementById("not-in-list").style.display="none",play1.style.display="none",play2.style.display="none",play3.style.display="none",play4.style.display="none",play5.style.display="none",play6.style.display="none",play7.style.display="none",letters[0]=todayletters[0],letters[1]=todayletters[1],letters[2]=todayletters[2],letters[3]=todayletters[3],letters[4]=todayletters[4],letters[5]=todayletters[5],letters[6]=todayletters[6],words=todaywords,total=todaytotal,wordlist=todaywordlist,set_rank(),!0===localStorage.hasOwnProperty("foundwords")&&replay_words(),document.getElementById("update-random").innerHTML=yesterdaywordlist.join("<br />")+"<br /><br />Total words:  "+yesterdaywords+"<br />Total points: "+yesterdaytotal+"<br />Points for Queen Bee: "+Math.floor(.7*yesterdaytotal),display()}function get_yesterday(){var e=new XMLHttpRequest;e.onreadystatechange=function(){var e;4==this.readyState&&200==this.status&&(e=JSON.parse(this.responseText),yesterdaywords=e.words,yesterdaytotal=e.total,yesterdaywordlist=e.wordlist)},e.open("GET","yesterday",!0),e.send()}function get_today(){var e=new XMLHttpRequest;e.onreadystatechange=function(){var e;4==this.readyState&&200==this.status&&(e=JSON.parse(this.responseText),todayletters[0]=e.letters[0],todayletters[1]=e.letters[1],todayletters[2]=e.letters[2],todayletters[3]=e.letters[3],todayletters[4]=e.letters[4],todayletters[5]=e.letters[5],todayletters[6]="7"+e.center,todaywords=e.words,todaytotal=e.total,todaywordlist=e.wordlist,daily())},e.open("GET","today",!0),e.send()}function shuffle(){for(var e,t,n=5;0<n;n--)e=Math.floor(Math.random()*(n+1)),t=letters[e],letters[e]=letters[n],letters[n]=t;display()}function random(){for(var e=new XMLHttpRequest,t=daily_play=0;t<found;t++)foundlist.pop();rank="Newbie",win=points=found=all=0,document.getElementById("points-update").innerHTML=points,document.getElementById("answers-update").innerHTML=foundlist.join("<br />"),document.getElementById("rank-update").innerHTML=rank,document.getElementById("yesterday-or-random").innerHTML="Answers",document.getElementById("update-random").innerHTML="",document.getElementById("no-message").style.display="inline",document.getElementById("pangram").style.display="none",document.getElementById("already-found").style.display="none",document.getElementById("center-letter").style.display="none",document.getElementById("too-short").style.display="none",document.getElementById("not-in-list").style.display="none",document.getElementById("play1").style.display="none",document.getElementById("play2").style.display="none",document.getElementById("play3").style.display="none",document.getElementById("play4").style.display="none",document.getElementById("play5").style.display="none",document.getElementById("play6").style.display="none",document.getElementById("play7").style.display="none",e.onreadystatechange=function(){var e;4==this.readyState&&200==this.status&&(e=JSON.parse(this.responseText),letters[0]=e.letters[0],letters[1]=e.letters[1],letters[2]=e.letters[2],letters[3]=e.letters[3],letters[4]=e.letters[4],letters[5]=e.letters[5],letters[6]="7"+e.center,words=e.words,total=e.total,wordlist=e.wordlist,set_rank(),display(),document.getElementById("random-answers").style.display="block",document.getElementById("restart-daily-button").style.visibility="visible")},e.open("GET","../../cgi-bin/random",!0),e.send()}function show_random(){document.getElementById("update-random").innerHTML=wordlist.join("<br />")+"<br /><br />Total words:  "+words+"<br />Total points: "+total+"<br />Points for Queen Bee: "+Math.floor(.7*total)}function delete_letter(){var e=(t=document.getElementById("guess").value).length,t=t.slice(0,e-1)+t.slice(e,e);document.getElementById("guess").value=t}window.onload=function(){comb1=document.getElementById("comb1"),comb2=document.getElementById("comb2"),comb3=document.getElementById("comb3"),comb4=document.getElementById("comb4"),comb5=document.getElementById("comb5"),comb6=document.getElementById("comb6"),comb7=document.getElementById("comb7"),comb1.style.height="100px",comb1.style.width="100px",comb1.style.left="1px",comb1.style.top="51px",comb2.style.height="100px",comb2.style.width="100px",comb2.style.left="80px",comb2.style.top="1px",comb3.style.height="100px",comb3.style.width="100px",comb3.style.left="159px",comb3.style.top="51px",comb4.style.height="100px",comb4.style.width="100px",comb4.style.left="1px",comb4.style.top="149px",comb5.style.height="100px",comb5.style.width="100px",comb5.style.left="80px",comb5.style.top="199px",comb6.style.height="100px",comb6.style.width="100px",comb6.style.left="159px",comb6.style.top="149px",comb7.style.height="100px",comb7.style.width="100px",comb7.style.left="80px",comb7.style.top="100px",get_yesterday(),get_today(),dark=!0===localStorage.hasOwnProperty("useDarkMode")?Number(localStorage.getItem("useDarkMode")):1,darkmode()};